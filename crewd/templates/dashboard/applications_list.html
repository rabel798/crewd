{% extends "dashboard/base_dashboard.html" %}

{% block title %}Team Requests - Crewd{% endblock %}

{% block dashboard_content %}
<div class="page-header">
    <h1>Team Requests</h1>
</div>

<div class="dashboard-card">
    <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">Pending Applications</h2>
    </div>
    <div class="dashboard-card-body">
        <div class="list-group">
            {% for application in pending_applications %}
                <div class="list-item">
                    <div class="list-item-content">
                        <h3><a href="{% url 'projects:view_application' application.id %}">{{ application.applicant.username }}</a></h3>
                        <p><strong>Project:</strong> <a href="{% url 'projects:view_project' application.project.id %}">{{ application.project.title }}</a></p>
                        <p><strong>Applied:</strong> {{ application.created_at|date:"M d, Y" }}</p>
                        <div>
                            <span class="status-label status-pending">Pending</span>
                        </div>
                        <div class="list-item-actions">
                            <a href="{% url 'projects:view_application' application.id %}" class="btn">Review</a>
                            <a href="{% url 'projects:view_profile' application.applicant.id %}" class="btn btn-outline">View Profile</a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p>No pending applications.</p>
            {% endfor %}
        </div>
    </div>
</div>

<div class="dashboard-card">
    <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">Recently Reviewed Applications</h2>
    </div>
    <div class="dashboard-card-body">
        <div class="list-group">
            {% for application in recent_applications %}
                <div class="list-item">
                    <div class="list-item-content">
                        <h3>{{ application.applicant.username }}</h3>
                        <p><strong>Project:</strong> {{ application.project.title }}</p>
                        <p><strong>Applied:</strong> {{ application.created_at|date:"M d, Y" }}</p>
                        <div>
                            {% if application.status == 'accepted' %}
                                <span class="status-label status-accepted">Accepted</span>
                            {% elif application.status == 'rejected' %}
                                <span class="status-label status-rejected">Rejected</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% empty %}
                <p>No recently reviewed applications.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
