{% extends "dashboard/base_dashboard.html" %}

{% block title %}My Projects - Crewd{% endblock %}

{% block dashboard_content %}
<div class="page-header">
    <div class="page-header-content">
        <h1>My Projects</h1>
    </div>
    <div class="page-header-actions">
        <a href="{% url 'projects:create_project' %}" class="btn">+ New Project</a>
    </div>
</div>

<div class="dashboard-card">
    <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">Active Projects</h2>
    </div>
    <div class="dashboard-card-body">
        <div class="list-group">
            {% for project in active_projects %}
                <div class="list-item">
                    <div class="list-item-content">
                        <h3><a href="{% url 'projects:manage_project' project.id %}">{{ project.title }}</a></h3>
                        <p>{{ project.description|truncatechars:150 }}</p>
                        <p><strong>Team Size:</strong> {{ project.team_size }} | <strong>Current:</strong> {{ project.members.count }}</p>
                        <p><strong>Created:</strong> {{ project.created_at|date:"M d, Y" }}</p>
                        <div>
                            {% for skill in project.get_required_skills_list %}
                                <span class="tech-badge">{{ skill }}</span>
                            {% endfor %}
                        </div>
                        <div class="list-item-actions">
                            <a href="{% url 'projects:manage_project' project.id %}" class="btn">Manage</a>
                            <a href="{% url 'projects:find_contributors' project.id %}" class="btn btn-outline">Find Contributors</a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p>No active projects. <a href="{% url 'projects:create_project' %}">Create a new project!</a></p>
            {% endfor %}
        </div>
    </div>
</div>

<div class="dashboard-card">
    <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">Completed Projects</h2>
    </div>
    <div class="dashboard-card-body">
        <div class="list-group">
            {% for project in completed_projects %}
                <div class="list-item">
                    <div class="list-item-content">
                        <h3><a href="{% url 'projects:view_project' project.id %}">{{ project.title }}</a></h3>
                        <p><strong>Team Size:</strong> {{ project.team_size }} | <strong>Final:</strong> {{ project.members.count }}</p>
                        <p><strong>Completed:</strong> {{ project.updated_at|date:"M d, Y" }}</p>
                        <div>
                            <span class="status-label status-completed">Completed</span>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p>No completed projects.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
